<script type="text/javascript">
$(document).ready(function(){
    $(".scrollerMother").mousedown(function () {
        $(".scrollerMother").hover(startScroll,stopScroll);
    }).mouseup(function () {
        $(".scrollerMother").unbind('mousemove hover');
    });
    
    function startScroll(e)
    {
       var div = $(this).bind('mousemove', scrollThis);
       var o = div.offset();
       this.tempPosition = {
          left:o.left,
          top:o.top,
          right:o.left+div.width(),
          bottom:o.top+div.height(),
          scrollOffsetX:this.scrollWidth-this.clientWidth,
          scrollOffsetY:this.scrollHeight-this.clientHeight
       };

    }

    function stopScroll(e)
    {
       $(this).unbind('mousemove').removeAttr('tempPosition');

    }

    function scrollThis(e)
    {
       // Use the e.clientX and e.clientY vs this.tempPosition
       // to determine how much to move the scrollbars according
       // to your tastes.
       
       this.scrollTop = $(".scroller").height() - 500;
       this.scrollLeft = -(this.tempPosition.left + e.clientX);
       console.log($(".scroller").offset().left +'-'+ this.tempPosition.left +'+'+ e.clientX)
       console.log(-(this.tempPosition.left - e.clientX));
        $(".scroller").css("margin-left", -(this.tempPosition.left - e.clientX));

    } 
});
</script>
<div class="container" style="margin-top: 50px;">
    <div class="page-header">
        <h1>
            Timeline
            <small>The complete TV program always in your view</small>
        </h1>
    </div>
    <% if (channels) {
        for (i in channels) { 
        %>
        <div class="row" style="overflow: hidden; margin-bottom: 0px;">
            <div class="span3 columns" style="white-space:nowrap; overflow: hidden;">
                <h5><%= channels[i].channel.name %></h5>
            </div>
            <div class="span13 columns scrollerMother" style="overflow: hidden; white-space:nowrap; position: relative;">
                <div class="scroller">
                <% if (channels[i].epg) {
                    channels[i].epg.events.forEach(function (broadcast) { %>
                    <div class="alert-message warning" style="width: <%= broadcast.duration / 20 %>px; position: realtive; display: inline-block; margin-left: 5px; overflow: hidden">
                        <p>
                            <%= broadcast.title %>
                        </p>
                    </div>
                    <% 
                    })
                } %>
                </div>
            </div>
        </div>
    <%  }
    } %>
</div>
